<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feliz Navidad</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { overflow: hidden; font-family: 'Georgia', serif; background-color: #020205; }

    .night-sky {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle at center, #1a1a2e 0%, #020205 100%);
      z-index: 0;
    }

    canvas { display: block; position: absolute; top: 0; left: 0; z-index: 2; cursor: pointer; }

    .message {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 100;
      pointer-events: none;
      width: 90%;
      opacity: 0;
      transition: opacity 2s ease;
    }
    .message.show { opacity: 1; }
    .message h1 {
      font-size: 3rem;
      color: white;
      text-shadow: 0 0 20px #ff1744;
      background: linear-gradient(45deg, #ff1744, #ffffff, #ff80ab);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* BotÃ³n Flotante */
    .letter-button {
      position: fixed; bottom: 25px; right: 25px;
      width: 65px; height: 65px; background: #ff1744;
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-size: 1.8rem; cursor: pointer; z-index: 1000;
      box-shadow: 0 0 20px rgba(255, 23, 68, 0.6);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Modal de la Carta */
    .modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.85); display: none;
      align-items: center; justify-content: center; z-index: 2000;
    }
    .modal.active { display: flex; }
    .card {
      background: #fffafa; padding: 30px; border-radius: 15px;
      max-width: 400px; width: 85%; text-align: center;
      box-shadow: 0 0 30px rgba(255,255,255,0.2);
    }
    .card h2 { color: #ff1744; margin-bottom: 15px; }
    .card p { color: #333; line-height: 1.6; font-size: 1.1rem; }
    .close-btn { 
      margin-top: 20px; padding: 10px 20px; 
      background: #ff1744; color: white; border: none; 
      border-radius: 20px; cursor: pointer;
    }

    @media (max-width: 600px) { .message h1 { font-size: 1.8rem; } }
  </style>
</head>
<body>

  <div class="night-sky"></div>
  <canvas id="canvas"></canvas>

  <div class="message" id="message">
    <h1>FELIZ NAVIDAD ,
        <br> AMORðŸ’–</br></h1>
  </div>

  <div class="letter-button" id="letterBtn">ðŸ’Œ</div>

  <div class="modal" id="modal">
    <div class="card">
      <h2>Para Ti ðŸ’•</h2>
      <p>Quiero decirte que eres el mejor regalo que me dio la vida gracias por formar parte de mi vidaâœ¨ gracias por los momentos de felicidad risas enojos tristeza pero sabes con tan solo de verte me haces feliz  pÃ¡salo bien al lado de tus seres queridos y recuerda , eres muy importante para mÃ­ ðŸ¥° feliz navidad ðŸŽ‰ðŸŽ„ðŸŽ„</p>
      <button class="close-btn" id="closeBtn">Cerrar con Amor</button>
    </div>
  </div>

  <audio id="backgroundMusic" loop>
    <source src="https://github.com/codeninja543/codeninja5433/raw/refs/heads/main/New%20West%20-%20Those%20Eyes%20(Lyrics)%20(1).mp3" type="audio/mpeg">
  </audio>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const audio = document.getElementById('backgroundMusic');
    const modal = document.getElementById('modal');
    const letterBtn = document.getElementById('letterBtn');
    const closeBtn = document.getElementById('closeBtn');

    let width, height;
    let fireworks = [];
    let particles = [];
    let musicStarted = false;

    function resize() {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function startMusic() {
      if (!musicStarted) {
        audio.play().then(() => {
          musicStarted = true;
        }).catch(err => {
          console.log('Esperando interacciÃ³n del usuario para reproducir mÃºsica');
        });
      }
    }

    class Firework {
      constructor(tx, ty) {
        this.x = tx;
        this.y = height;
        this.tx = tx;
        this.ty = ty;
        this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
        this.speed = 10;
        this.alive = true;
      }
      update() {
        this.y -= this.speed;
        if (this.y <= this.ty) {
          this.explode();
          this.alive = false;
        }
      }
      draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
        ctx.fill();
      }
      explode() {
        const count = 80;
        for (let i = 0; i < count; i++) {
          const t = (i / count) * Math.PI * 2;
          const x = 16 * Math.pow(Math.sin(t), 3);
          const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
          particles.push(new Particle(this.tx, this.ty, this.color, x * 0.7, y * 0.7));
        }
        document.getElementById('message').classList.add('show');
      }
    }

    class Particle {
      constructor(x, y, color, vx, vy) {
        this.x = x;
        this.y = y;
        this.color = color;
        this.vx = vx * (Math.random() * 0.5 + 0.5);
        this.vy = vy * (Math.random() * 0.5 + 0.5);
        this.alpha = 1;
        this.gravity = 0.12;
        this.friction = 0.96;
      }
      update() {
        this.vx *= this.friction;
        this.vy *= this.friction;
        this.vy += this.gravity;
        this.x += this.vx;
        this.y += this.vy;
        this.alpha -= 0.012;
      }
      draw() {
        ctx.save();
        ctx.globalAlpha = this.alpha;
        ctx.shadowBlur = 10;
        ctx.shadowColor = this.color;
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
      }
    }

    function animate() {
      ctx.fillStyle = 'rgba(2, 2, 5, 0.2)';
      ctx.fillRect(0, 0, width, height);

      fireworks.forEach((fw, i) => {
        fw.update();
        fw.draw();
      });
      fireworks = fireworks.filter(fw => fw.alive);

      particles.forEach((p, i) => {
        p.update();
        p.draw();
      });
      particles = particles.filter(p => p.alpha > 0);

      requestAnimationFrame(animate);
    }

    window.addEventListener('mousedown', (e) => {
      startMusic();
      fireworks.push(new Firework(e.clientX, e.clientY));
    });

    window.addEventListener('touchstart', (e) => {
      startMusic();
      const touch = e.touches[0];
      fireworks.push(new Firework(touch.clientX, touch.clientY));
    });

    letterBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      modal.classList.add('active');
    });

    closeBtn.addEventListener('click', () => {
      modal.classList.remove('active');
    });

    animate();
  </script>
</body>
</html>